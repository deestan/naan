(function(e){function i(e,t,n){var e=e||(Array.isArray(t)?[]:{}),r=Array.prototype.slice.call(arguments,3);typeof n!="function"&&(r.unshift(n),n=naan.curry),r.unshift(null);var i=[],s=0;for(var o in t){if(typeof t[o]!="function"){e[o]=t[o];continue}(s=i.indexOf(t[o]))!==-1?e[o]=i[s]:(r[0]=t[o],e[o]=n.apply(this,r),i.push(e[o]))}return e}var t,n=this;if(typeof module!="undefined"&&module.exports)t=require("async");else{if(!n.async)throw'Naan requires the "async" module. Get it from https://github.com/caolan/async.git';t=n.async}var r=function(){function n(e,t,n,i){function o(t){return function(){return t.apply(e,s(arguments))}.bind(e)}var s=r.prepare(n,i);return Array.isArray(t)?t.map(o):o(t)}function r(t,n,r){var i=Array.prototype;if(r===e||r===!0||r===0||r<0)i=n.concat(i.slice.call(t));else if(r===!1||t.length<r)i=i.slice.call(t).concat(n);else if(Array.isArray(r)){i=i.slice.call(t);for(var s in r){if(s>=n.length)break;s==r.length-1&&n.length>r.length?i.splice.apply(i,[r[s],0].concat(n.slice(s))):i.splice(r[s],0,n[s])}}else i=[].concat(i.slice.call(t,0,r),n,i.slice.call(t,r));return i}return naan={},naan.cook=function(i,s,o,u,a,f){var l=f?t.series:t.parallel,c=a;return Array.isArray(o)||(o=[o]),function(){var t=[].slice.call(arguments);if(!a||a<0)a=t.length-1;else if(typeof u=="number"&&u<a)a--;else if(u===e||u===!0)a--;else for(var n in u)u[n]<a&&a--;var f=t[a];c===!1&&(t=[].concat(t.slice(0,a),t.slice(a+1)));if(typeof f!="function")return;l(o,function(e,n){if(e)f(e);else{var o=s.apply(i,r.prepare(n,u)(t));(c===!1||c===null)&&f(null,o)}})}},r.prepare=function(e,t){if(Array.isArray(t)){var n=-1,i=e.map(function(e){return{index:++n>=t.length?t[t.length-1]:t[n],value:e}});i.sort(function(e,t){return e.index-t.index}),e=i.map(function(e){return e.value}),t=t.slice().sort()}return function(n){return r(n,e,t)}},naan.tupperware=naan.alwaysReturn=naan.wrap=function(t,n,r){return function(){return n.apply(t,arguments),r}},naan.ltupperware=naan.lalwaysReturn=naan.lwrap=function(t,n,r){return tupperware(t,r,n)},naan.curry=naan.leftCurry=naan.lcurry=function(t,r){return n(t,r,[].slice.call(arguments,2))},naan.rightCurry=naan.rcurry=function(t,r){return n(t,r,[].slice.call(arguments,2),!1)},naan.curryArgs=naan.leftCurryArgs=naan.lcurrya=naan.currya=function(t,r,i){return n(t,r,i)},naan.rightCurryArgs=naan.rcurrya=function(t,r,i){return n(t,r,i,!1)},naan.positionCurry=naan.ncurry=naan.pcurry=function(t,r,i,s){return Array.isArray(i)||(i=[i]),n(t,r,i,s)},naan.entangleCurry=naan.ecurry=function(){return n.apply(this,Array.prototype.slice.call(arguments))},naan}(),s=i({},r,r.curry(this,r.curry,this),this),o=s.curry(i,!1);s.crock=s.groupCurry=s.group=s.gcurry=o,s.extendCrock=s.ecrock=s.egroup=s.egcurry=i,s.b=s.bound=r,s.extendCombine=s.ecombine=function(t,n,r,i){i=i||s.curry;var o=t||(Array.isArray(n)?[]:{});if(Array.isArray(n)&&n.length!==r.length)return e;for(var u in n){if(typeof r[u]=="undefined")continue;var a=[n[u]].concat(r[u]);o[u]=i.apply(this,a)}return o},s.combine=s.curry(s.ecombine,null),typeof module!="undefined"&&module.exports?module.exports=s:n.naan=s})();